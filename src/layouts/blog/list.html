{{ define "main" }}

<header class="ph3 ph4-ns">
  <h1 class="f1 f1-vw-l normal" style="">{{ .Title }}</h1>
</header>

<style media="screen">
  .rssblog h1 {
    font-size: 1.2em;
  }
</style>

<!-- AJAX/FETCH METHOD -->
<section>
  <script type="text/javascript">
    const RSS_URL = `https://community.resonate.coop/c/blog/104.rss`;

    $.ajax(RSS_URL, {
      accepts: {
        xml: "application/rss+xml"
      },

      dataType: "xml",

      success: function(data) {
        $(data)
          .find("item")
          .each(function() {
            const el = $(this);

            const template = `
                  <section class="ph2 ph3-ns">
            <article class="relative flex flex-column-reverse flex-row-reverse-l mb5 f5 f5-vw-l">
              <div class="w-100 w-60-l ph2 ph3-ns">
                <img src="${el.find("link").text()}/image/large.png" alt="">
                <h2 class="f4 f4-vw-l mv0" style="text-decoration:none;">${el.find("title").text()}</h2>
                <p class="mt1 mb4 dark-gray"><time datetime="">${el.find("pubDate").text()}</time></p>
                <p class="near-black">
                ${el.find("description").text()}
                <a href="${el.find("link").text()}" class="db link-full normal black mt3">Continue Reading</a>
                </p>
              </div>
            </article>
            </section>
            `;

            document.body.insertAdjacentHTML("beforeend", template);
          });
      }
    });
  </script>
</section>

<!-- HUGO BLOG -->
<!-- <section class="ph2 ph3-ns">
  {{ range .Pages }}
  <article class="relative flex flex-column-reverse flex-row-reverse-l mb5 f5 f5-vw-l">
    <div class="w-100 w-60-l ph2 ph3-ns">
      <h2 class="f4 f4-vw-l mv0">{{ .Title }}</h2>
      <p class="mt1 mb4 dark-gray"><time datetime="{{ time.Format "2006-01-02" .Date }}">{{  time.Format "January 2, 2006" .Date }}</time></p>
      <p class="near-black">
        {{ .Summary }}
        <a href="{{ .Permalink }}" class="db link-full normal black mt3">{{ T "continue_reading" }}</a>
      </p>
    </div>
    <figure class="w-40-l h-100 ma0 mb4 ph2 ph3-ns">
      {{ with .Params.image }}
      {{- $img := resources.Get . -}}
      <img class="db w-100 h-auto bg-gray" src="{{ $img.Permalink }}" width="360" height="200" alt="" loading="lazy">
      {{ end }}
    </figure>
  </article>
  {{ end }}
</section> -->

{{ end }}
